<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Leo's JS</title>

    <link rel="stylesheet" href="../stylesheets/screen.css"/>
    <link rel="stylesheet" href="../stylesheets/main.css"/>

    <link href='http://fonts.googleapis.com/css?family=Lato:100,100italic' rel='stylesheet' type='text/css'>
</head>
<body id="mouse" class="flex">
<h1>hello event world</h1>
<img src="../me.jpg" alt="강동욱"/>
<div class="container">
    <p class="count">event count: 0</p>
    <div class="flex">
        <button class="click">click</button>
        <button class="dblclick">double click</button>
    </div>
</div>

<script>
    (function () {
        'use strict';

        var click = document.getElementsByClassName('click').item(0),
                dbclick = document.getElementsByClassName('dblclick').item(0),
                img = document.getElementsByTagName('img').item(0),
                count = document.getElementsByClassName('count').item(0),
                clickCount = 0;

        // 클릭 카운트를 증가시킵니다. - Lier 15. 3. 21. 오전 12:41
        function increaseEventCount(expectedCount) {
            if (expectedCount != undefined) {
                clickCount += expectedCount;
            } else {
                clickCount += 1;
            }

            var countTextNode = document.createTextNode('event count: ' + clickCount),
                    countChildNodes = count.childNodes;

            for (var i = 0; i < countChildNodes.length; i++) {
                count.removeChild(countChildNodes[i]);
            }

            count.appendChild(countTextNode);
        };

        // 클릭 이벤트를 등록합니다. - Lier 15. 3. 21. 오전 12:41
        click.addEventListener('click', function () {
            increaseEventCount();
        });

        // 더블클릭 이벤트를 등록합니다. - Lier 15. 3. 21. 오전 12:41
        dbclick.addEventListener('dblclick', function () {
            increaseEventCount(2);
        });

        document.addEventListener('mousemove', function (e) {
            if (img.classList.contains('default')) {
                img.classList.remove('default');
            }

            img.style.right = e.screenX + 'px';
            img.style.bottom = e.screenY + 'px';
        });

        document.addEventListener('mouseout', function (e) {
            img.classList.add('default');
        });
    }());
</script>
</body>
</html>